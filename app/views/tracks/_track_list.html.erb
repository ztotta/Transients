
<!--  conditionals maze?  -->
    <% if flash[:notice] %>
        <h4 class="warning-notice"><%= flash[:notice] %></h4>
    <% end %> 
    <div id="track-list" class="row">
        <div class="col-xs-12">
            <div class="tracks-table-container">
                <table class="table table-hover table-responsive tracks-table">
                    <thead>
                        <tr>
                            <th></th>
                            <th>TITLE</th>
                            <% if @category %>
                                <th>USER</th>
                            <% end %>
                            <th>CATEGORY</th>
                            <th>DATE</th>
                            <th>LENGTH</th>
                            <th>PLAYS</th>
                            <% if @category == nil %>
                                <th></th>
                            <% end %>
                        </tr>
                    </thead>
                    <tbody>
                        <% if !@user %>
                            <% @tracks.reverse.first(20).each do |track| %>
                                <% if current_user.id != UserTrack.where({track_id: track.id}) %>
                                    <% user_name = User.find(track.user_id).username %>
                                    <tr class="song-row"> 
                                        <!--    <td><button type="button" class="btn btn-default btn-circle"><i class="glyphicon glyphicon-play"></i></button></td> --->
                                        <td class="play-button"><a href=""><span class="glyphicon glyphicon-play" aria-hidden="true"></span></a></td>
                                        <td class="table-title"><%= track.title %></td> 
                                        <td><%= link_to user_name, user_path(track.user_id) unless !@category %></td> <!-- did inline conditional work? -->
                                        <td><%= link_to track.category, tracks_path(:category => track.category) %></td>
                                        <td><%= track.formatted_time %></td>
                                        <td><%= Time.at(track.length).utc.strftime("%M:%S") %></td>
                                        <td><%= track.plays %></td>
                                    </tr>
                                <% end %>
                            <% end %>
<!--                                <tr><div id="waveform"></div></tr> -->
                        <% else %>
                            <% @user.tracks.reverse.first(20).each do |track| %>
                                <% if current_user.id != UserTrack.where({track_id: track.id}) %>
                                    <tr class="song-row">
                                        <td class="play-button"><a href=""><span class="glyphicon glyphicon-play" aria-hidden="true"></span></a></td>
                                        <td class="table-title"><%= track.title %></td>
                                        <td><%= link_to track.category, tracks_path(:category => track.category) %></td>
                                        <td><%= track.formatted_time %></td>
                                        <td><%= Time.at(track.length).utc.strftime("%M:%S") %></td>
                                        <td><%= track.plays %></td>
                                        <td><%= link_to("X", track_path(track), method: :delete) if track.user == current_user %></td>
                                    </tr> 
                                <% end %>
                            <% end %>

                        <% end %>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    
    <td id="waveformTemplate" colspan="7"></td>
    
<!--
    <div style="display:none" id="waveform-template">
        <td colspan="7"><div id="waveform" >
            <progress id="progress" class="progress progress-striped" value="100" max="100" style="display: none;"></progress>
            <wave style="position: absolute; z-index: 2; left: 0px; top: 0px; bottom: 0px; overflow: hidden; width: 0px; display: block; box-sizing: border-box; border-right: 1px solid rgb(255, 255, 255);">
                  <canvas width="1820" height="256" style="width: 910px;"></canvas>
            </wave>
        </div></td>
    </div>
-->
    